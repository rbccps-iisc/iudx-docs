

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Subscribe &mdash; IUDX  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Device / Owner APIs" href="device_owner_apis.html" />
    <link rel="prev" title="Publish" href="publish.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> IUDX
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="gettingStarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="security_schemes.html">Security Schemes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="apis.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="admin_apis.html">Admin APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="owner_apis.html">Owner APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="owner_admin_apis.html">Owner / Admin APIs</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="device_apis.html">Device APIs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="publish.html">Publish</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Subscribe</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#request">Request</a></li>
<li class="toctree-l4"><a class="reference internal" href="#responses">Responses</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="device_owner_apis.html">Device / Owner APIs</a></li>
<li class="toctree-l2"><a class="reference internal" href="general_apis.html">General APIs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="help.html">Help and Support</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">IUDX</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="apis.html">API Documentation</a> &raquo;</li>
        
          <li><a href="device_apis.html">Device APIs</a> &raquo;</li>
        
      <li>Subscribe</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/subscribe.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="subscribe">
<h1>Subscribe<a class="headerlink" href="#subscribe" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><strong>Summary</strong>: The subscribe API is used to get messages from a queue. This is a destructive action on the message as
it will no longer be available in the queue after subscription. This API is not streaming, i.e. as data arrives into the
queue it is not pushed to the subscribers. However, it needs to be polled regularly to check for new messages.</li>
</ul>
<div class="section" id="request">
<h2>Request<a class="headerlink" href="#request" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><strong>Endpoint</strong>: <code class="docutils literal notranslate"><span class="pre">https://localhost/entity/subscribe</span></code></p>
</li>
<li><p class="first"><strong>Method</strong>: <code class="docutils literal notranslate"><span class="pre">GET</span></code></p>
</li>
<li><p class="first"><strong>Security Scheme</strong>: <a class="reference internal" href="security_schemes.html"><span class="doc">Device Credentials</span></a></p>
</li>
<li><p class="first"><strong>Optional Headers</strong>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Header Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>message-type</td>
<td>Either of <code class="docutils literal notranslate"><span class="pre">priority</span></code>, <code class="docutils literal notranslate"><span class="pre">command</span></code> or <code class="docutils literal notranslate"><span class="pre">notification</span></code>.
If this field is empty then the supplied <code class="docutils literal notranslate"><span class="pre">id</span></code> is taken
as the default queue name</td>
</tr>
<tr class="row-odd"><td>num-messages</td>
<td>Number of messages to subscribe to. Defaults to 10</td>
</tr>
</tbody>
</table>
</li>
</ul>
</div>
<div class="section" id="responses">
<h2>Responses<a class="headerlink" href="#responses" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">200</span> <span class="pre">OK</span></code></p>
<blockquote>
<div><ul>
<li><p class="first">Gives back messages from the queue</p>
<blockquote>
<div><div class="highlight-JSON notranslate"><div class="highlight"><pre><span></span><span class="p">[{</span>
    <span class="nt">&quot;sent-by&quot;</span><span class="p">:</span> <span class="s2">&quot;admin/dev&quot;</span><span class="p">,</span>
    <span class="nt">&quot;from&quot;</span><span class="p">:</span> <span class="s2">&quot;admin/dev.protected&quot;</span><span class="p">,</span>
    <span class="nt">&quot;subject&quot;</span><span class="p">:</span> <span class="s2">&quot;streetlight data&quot;</span><span class="p">,</span>
    <span class="nt">&quot;content-type&quot;</span><span class="p">:</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span>
    <span class="nt">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;ambientLux&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
        <span class="nt">&quot;power&quot;</span><span class="p">:</span> <span class="mf">73.26</span><span class="p">,</span>
        <span class="nt">&quot;caseTemp&quot;</span><span class="p">:</span> <span class="mf">34.5</span>
    <span class="p">}</span>
<span class="p">}]</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal notranslate"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></code></p>
<blockquote>
<div><ul>
<li><p class="first">If any of the required headers are missing from the request:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;inputs missing from headers&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">If the provided <code class="docutils literal notranslate"><span class="pre">id</span></code> is not a valid entity:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;id is not a valid entity&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">If <code class="docutils literal notranslate"><span class="pre">message-type</span></code> is provided but is invalid:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;invalid message-type&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p class="first">If <code class="docutils literal notranslate"><span class="pre">num-messages</span></code> is provided but is not valid:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;error&quot;</span><span class="p">:</span> <span class="s2">&quot;num-messages is not valid&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="device_owner_apis.html" class="btn btn-neutral float-right" title="Device / Owner APIs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="publish.html" class="btn btn-neutral" title="Publish" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Robert Bosch Centre for Cyber-Physical Systems, Indian Institute of Science.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>